import React, { useState } from 'react'
import ReactDOM from 'react-dom'
import { Layout, Menu, Breadcrumb } from 'antd'
import Clusters from './components/Clusters'
import Cluster from './components/Cluster';

const onSelectCluster = ({ setCurrentCluster }, cluster) => {
    setCurrentCluster(cluster)
}

const Application = (props) => {
    const [currentCluster, setCurrentCluster] = useState(null)
    const hooks = { currentCluster, setCurrentCluster }

    return <Layout>
        <Layout.Header>
            <Menu
                theme="dark"
                mode="horizontal"
                defaultSelectedKeys={['1']}
                style={{ lineHeight: '64px' }}
            >
                <Menu.Item key="1">Malware Family Clusters</Menu.Item>
            </Menu>
        </Layout.Header>
        <Layout.Content style={{ padding: '0 50px' }}>
            <Breadcrumb style={{ margin: '16px 0' }}>
                <Breadcrumb.Item>
                    <a href="/">Viper</a>
                </Breadcrumb.Item>
                <Breadcrumb.Item>
                    <a href="#" onClick={() => setCurrentCluster(null)}>Malware Family Clusters</a>
                </Breadcrumb.Item>
                {
                    currentCluster && <Breadcrumb.Item>
                        {`Cluster ${currentCluster.id}`}
                    </Breadcrumb.Item>
                }
            </Breadcrumb>

            <div style={{ background: '#FFFFFF', padding: 24 }}>
                {
                    currentCluster
                        ? <Cluster cluster={currentCluster} />
                        : <Clusters onSelectCluster={c => onSelectCluster(hooks, c)} />
                }
            </div>
            
        </Layout.Content>
    </Layout>
}

ReactDOM.render(<Application />, document.getElementById('application'));